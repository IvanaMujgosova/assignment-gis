# Overview

Application shows restarants, cofes, pubs and fast- foods in London.

Scenarios:
- select two food points from map and show way, how to get from one place to another. Application also shows distances between points and road.
- show nearby food points around selected pointed on map.
- show food places at some part of London.

This is it in action:

![Screenshot](screenshot.png)

Skeleton of application was created using Express generator, Angular and Node.js. Client of this application is using mapbox API and the backend is written in JavaScript with PostGIS database.

# Frontend
The frontend application is HTML page. It was created using Angular and Express. There is menu and mapbox on the screen. By clicking tabs in menu can user be linked to map, which is suited for another scenario. Map is showing London food places. Therefore I decided to use Bright style. It is useful because we want to see buildings that are in the city. It also nicely shows street names. Food places are also visible well on this type of map.

Frontend' s responsibility is detecting user inputs which are done on the map, displaying data and providing interaction in mapbox and menu. It is also responsible for calling appropriate backend APIs.

# Backend

The backend of application is written in JavaScript. It is responsible for adding data to mapbox and also all the work with processing them. Communication with PostGIS is done via Node- Postgres.

## Data

Data about food places in London was downloaded from [geofabrik] (https://download.geofabrik.de/europe/great-britain/england/greater-london.html). It contains all data about Greater London. It was downloaded in greater-london-latest.osm.bz2 format and then added to PostGIS database.

Indices were created on columns 'way' and 'name' in all the tables. GeoJSON is generated by using ST_AsGeoJSON, which provides the requested format, which can be easily inserted into mapbox. Data, that had different data type (not geometry) were used to sort and describe GeoJSON data.

## Api

**Find food places in 1000 m area**

`GET http://localhost:3000/index.html?lng=-0.06934189974165861&lat=51.496298146252514&area=1000`

**Find road, which is closest to two points**

`GET http://localhost:3000/line.html?idA=5335200242&idB=694510208`

**Find food places in London region**

`GET http://localhost:3000/regionPoints.html?region=City%20of%20Westminster`

### Response

API calls return json responses with 2 top-level keys, `hotels` and `geojson`. `hotels` contains an array of hotel data for the sidebar, one entry per matched hotel. Hotel attributes are (mostly self-evident):
```
{
  "name": "Modra hviezda",
  "style": "modern", # cuisine style
  "stars": 3,
  "address": "Panska 31"
  "image_url": "/assets/hotels/652.png"
}
```
`geojson` contains a geojson with locations of all matched hotels and style definitions.
